# apiVersion: helm.toolkit.fluxcd.io/v2
# kind: HelmRelease
# metadata:
#   name: cnpg
#   namespace: network-system
# spec:
#   driftDetection:
#     mode: enabled
#   interval: 15m
#   chart:
#     spec:
#       # renovate: registryUrl=https://cloudnative-pg.github.io/charts
#       chart: cluster
#       version: 0.3.1
#       sourceRef:
#         kind: HelmRepository
#         name: cloudnative-pg
#         namespace: flux-system
#   maxHistory: 3
#   install:
#     createNamespace: true
#     remediation:
#       retries: 3
#   upgrade:
#     cleanupOnFail: true
#     remediation:
#       retries: 3
#   uninstall:
#     keepHistory: false
#   values:
#     type: postgresql
#     cluster:
#       instances: 3
#       storage:
#         size: 50Gi
#         storageClass: nfs-dynamic
#       postgresUID: 1000
#       postgresGID: 3001
#       resources:
#         limits:
#           cpu: 1000m
#           memory: 4Gi
#         requests:
#           cpu: 500m
#           memory: 1Gi
